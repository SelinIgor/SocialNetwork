(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,t,a){e.exports=a.p+"static/media/user.83bd44a6.png"},132:function(e,t,a){e.exports=a.p+"static/media/prel.6e5d6096.gif"},134:function(e,t,a){e.exports={content:"ProfileCom_content__2T3WN"}},135:function(e,t,a){e.exports=a.p+"static/media/validators.4f0bc9af.bin"},16:function(e,t,a){e.exports={Nav:"Nav_Nav__2j3RX",nav:"Nav_nav__1dzm6",active:"Nav_active__3IDcM",topNav:"Nav_topNav__1q2nJ"}},163:function(e,t,a){e.exports=a(290)},168:function(e,t,a){},169:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(66),s=a.n(o);a(168),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,l=a(20),c=a(21),u=a(23),m=a(22),p=(a(169),a(16)),d=a.n(p),f=a(10),g=function(){return r.a.createElement("div",{className:d.a.Nav},r.a.createElement("div",{className:d.a.topNav},r.a.createElement("div",null,r.a.createElement(f.b,{to:"/profile",className:d.a.nav,activeClassName:d.a.active},"Profile"),r.a.createElement(f.b,{to:"/messages",className:d.a.nav,activeClassName:d.a.active},"Messages"),r.a.createElement(f.b,{to:"/music",className:d.a.nav,activeClassName:d.a.active},"Music"),r.a.createElement(f.b,{to:"/users",className:d.a.nav,activeClassName:d.a.active}," Users"),r.a.createElement(f.b,{to:"/setting",className:d.a.nav,activeClassName:d.a.active}," Setting"))))},h=a(30),E=(a(174),function(){return r.a.createElement("div",null,"Music")}),v=a(46),_=a(8),b={masseges:[{text:"Hi there"},{text:"What Am I doing wrong?"},{text:"Nothing. Cant get it"},{text:"Okey"}],dialogs:[{name:"Igor",id:1,kartinka:"https://i.pinimg.com/736x/c9/eb/dd/c9ebddca44e1b308c672e641af252be5.jpg"},{name:"Nestor",id:2,kartinka:"https://avatarko.ru/img/kartinka/33/multfilm_lyagushka_32117.jpg"},{name:"Marta",id:3,kartinka:"https://hahadu.ru/wp-content/uploads/2019/07/3-20.jpg"},{name:"Oleg",id:4,kartinka:"https://focus.ua/storage/pub/images/2017/2615387.jpg"}]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SMS":var a=Object(_.a)({},e,{masseges:Object(v.a)(e.masseges)}),n={text:t.newMassage};return a.masseges.push(n),a;default:return e}},k=a(36),O=a.n(k),N=a(37),C=a.n(N),S=function(e){var t="/Masseges/"+e.id;return r.a.createElement("div",{className:C.a.dialogs},r.a.createElement("div",{className:C.a.photo},r.a.createElement("img",{src:e.kartinka,className:C.a.kartinka})),r.a.createElement("div",{className:C.a.nameDialog},r.a.createElement(f.b,{to:t,activeClassName:C.a.active,className:C.a.nameDialog},e.name)))},y=(a(175),function(e){return r.a.createElement("div",null," ",e.text)}),j=a(124),w=a(125),I=a(137),U=a(34),D=a.n(U),x=function(e){return function(t){var a=t.input,n=t.meta,o=Object(I.a)(t,["input","meta"]),s=n.touched&&n.error;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(e,Object.assign({},a,o,{className:s&&D.a.error}))),s&&r.a.createElement("span",{className:D.a.spanError},n.error))}},M=x("textarea"),A=(i=50,function(e){if(e&&e.length>i)return"Must be ".concat(i," characters or less")}),T=Object(w.a)({form:"addMassage"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(j.a,{className:O.a.textarea,component:M,validate:[A],name:"newMassegeBody"}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:O.a.shareButton}," Send")))})),L=function(e){var t=e.dialogsPage.masseges.map((function(e){return r.a.createElement(y,{text:e.text})})),a=e.dialogsPage.dialogs.map((function(e){return r.a.createElement(S,{name:e.name,id:e.id,kartinka:e.kartinka})}));return r.a.createElement("div",{className:O.a.mainMasseges},r.a.createElement("div",{className:O.a.dialogsItem},a),r.a.createElement("div",{className:O.a.dialogs},t,r.a.createElement("div",{className:O.a.inputMassage},r.a.createElement(T,{onSubmit:function(t){e.sendSms(t.newMassegeBody)}}))))},F=a(9),z=function(e){return{isAuth:e.auth.isAuth}},R=function(e){return Object(F.b)(z,{})((function(t){return t.isAuth?r.a.createElement(e,t):r.a.createElement(h.a,{to:"/login"})}))},B=a(7),H=Object(B.d)(Object(F.b)((function(e){return{dialogsPage:e.MassagePage}}),(function(e){return{sendSms:function(t){e(function(e){return{type:"ADD_SMS",newMassage:e}}(t))}}})),R)(L),W=a(130).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"14afbc17-5def-47a5-befe-a2e4e52003d8"}}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return W.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},J=function(e){return W.post("follow/".concat(e))},V=function(e){return W.delete("follow/".concat(e))},q=function(e){return W.get("profile/".concat(e))},Y=function(){return W.get("auth/me")},K=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return W.post("/auth/login",{email:e,password:t,rememberMe:a,captcha:n})},X=function(){return W.delete("/auth/login")},Z=function(e){return W.get("profile/status/"+e)},Q=function(e){return W.put("profile/status/",{status:e})},$=function(e){var t=new FormData;return t.append("image",e),W.put("profile/photo",t,{headers:{"content-type":"multipart/form-data"}})},ee=function(e){return W.put("profile",e)},te=function(){return W.get("security/get-captcha-url")},ae={users:[],pageSize:5,totalUsersCount:60,currentPage:1,portionSize:10,isFetching:!1,followProgress:[]},ne=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},re=function(e,t){return{type:"FOLLOWING_IN_PROGRESS",isFetching:e,userId:t}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(_.a)({},e,{users:e.users.map((function(e){return e.id===t.usersId&&(e=Object(_.a)({},e,{followed:!0})),e}))});case"UNFOLLOW":return Object(_.a)({},e,{users:e.users.map((function(e){return e.id===t.usersId&&(e=Object(_.a)({},e,{followed:!1})),e}))});case"SET_USERS":return Object(_.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(_.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(_.a)({},e,{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(_.a)({},e,{isFetching:t.isFetching});case"FOLLOWING_IN_PROGRESS":return Object(_.a)({},e,{followProgress:t.isFetching?[].concat(Object(v.a)(e.followProgress),[t.userId]):e.followProgress.filter((function(e){return e!==t.userId}))});default:return e}},se=a(35),ie=a(47),le=a.n(ie),ce=a(131),ue=a.n(ce),me=function(e,t){for(var a=t.portionSize,o=void 0===a?10:a,s=Math.ceil(e.totalUsersCount/e.pageSize),i=[],l=1;l<=s;l++)i.push(l);var c=Math.ceil(s/o),u=Object(n.useState)(1),m=Object(se.a)(u,2),p=m[0],d=m[1],g=(p-1)*o+1,h=p*o;return r.a.createElement("div",null,r.a.createElement("div",{className:le.a.paginator},p>1&&r.a.createElement("button",{onClick:function(){d(p-1),function(t){e.onClickChanged(t-o)}(g)}},"PREV"),r.a.createElement("div",{className:le.a.buttonsBlock},i.filter((function(e){return e>=g&&e<=h})).map((function(t){return r.a.createElement("button",{onClick:function(){return e.onClickChanged(t)},className:e.currentPage===t&&le.a.selectedPage,key:t},t)}))),c>p&&r.a.createElement("button",{onClick:function(){d(p+1),function(t){e.onClickChanged(t+o)}(g)}},"NEXT")),e.users.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:le.a.Container},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(f.b,{to:"/profile/"+t.id},r.a.createElement("img",{alt:"user's photo",className:le.a.userImg,src:null!=t.photos.small?t.photos.small:ue.a}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)}}," unfollow"):r.a.createElement("button",{disabled:e.followProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"follow"))),r.a.createElement("div",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,r.a.createElement("p",null," ",t.status))),r.a.createElement("div",null," ","u.location.city"," ",r.a.createElement("br",null),"u.location.country")))})))},pe=a(132),de=a.n(pe),fe=a(91),ge=a.n(fe),he=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:ge.a.preloaderConatiner},r.a.createElement("img",{src:de.a,className:ge.a.preloader})))},Ee=a(133),ve=(Object(Ee.a)((function(e){return e.UsersPage.users}),(function(e){return e})),function(e){return e.UsersPage.currentPage}),_e=function(e){return e.UsersPage.isFetching},be=function(e){return e.UsersPage.followProgress},Pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClickChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null," ",this.props.isFetching?r.a.createElement(he,null):r.a.createElement(r.a.Fragment,null),r.a.createElement(me,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,onClickChanged:this.onClickChanged,currentPage:this.props.currentPage,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,followingInProgress:this.props.followingInProgress,followProgress:this.props.followProgress,portionSize:this.props.portionSize}," "))}}]),a}(r.a.Component),ke=Object(F.b)((function(e){return{users:e.UsersPage.users,pageSize:e.UsersPage.pageSize,totalUsersCount:e.UsersPage.totalUsersCount,currentPage:ve(e),isFetching:_e(e),followProgress:be(e),portionSize:e.UsersPage.portionSize}}),{followingInProgress:re,getUsers:function(e,t){return function(a){a(function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}(e)),a(ne(!0)),G(e,t).then((function(e){a(ne(!1)),a({type:"SET_USERS",users:e.items}),a({type:"SET_TOTAL_USERS_COUNT",totalUsersCount:e.totalCount})}))}},follow:function(e){return function(t){t(re(!0,e)),J(e).then((function(a){0===a.data.resultCode&&t({type:"FOLLOW",usersId:e}),t(re(!1,e))}))}},unfollow:function(e){return function(t){t(re(!0,e)),V(e).then((function(a){0===a.data.resultCode&&t({type:"UNFOLLOW",usersId:e}),t(re(!1,e))}))}}})(Pe),Oe=a(134),Ne=a.n(Oe),Ce=a(38),Se=a.n(Ce),ye=a(92),je=a.n(ye),we=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e.ActivateEditMode=function(){e.setState({editMode:!0})},e.DeactivateEditMode=function(){e.setState({editMode:!1},e.props.updateStatus(e.state.status))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.setState({status:this.props.status})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:je.a.mainContainer},!this.state.editMode&&r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:this.ActivateEditMode,className:je.a.statusText},this.props.status)),this.state.editMode&&r.a.createElement("div",null,r.a.createElement("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.DeactivateEditMode,value:this.state.status}))))}}]),a}(r.a.Component),Ie=a(135),Ue=x("input"),De=Object(w.a)({form:"profileData"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},e.error?r.a.createElement("div",{className:D.a.spanError},e.error):void 0,r.a.createElement("div",null," ",r.a.createElement("button",{type:"submit"},"save")),"About me: ",r.a.createElement(j.a,{type:"text",name:"aboutMe",placeholder:"",component:Ue,validate:Ie.required}),"Your fullname ",r.a.createElement(j.a,{type:"text",name:"fullName",placeholder:"",component:Ue}),"Are you looking for a job? ",r.a.createElement(j.a,{type:"checkbox",name:"lookingForAJob",placeholder:"",component:Ue}),"Please tell us about your skills  ",r.a.createElement(j.a,{type:"text",name:"lookingForAJobDescription",placeholder:"",component:Ue}),"You in social networks",Object.entries(e.profile.contacts).map((function(e){var t=Object(se.a)(e,2),a=t[0];t[1];return r.a.createElement(j.a,{type:"text",name:"contacts."+a,placeholder:a,component:Ue})})))})),xe=function(e){var t=Object(n.useState)(!1),a=Object(se.a)(t,2),o=a[0],s=a[1];if(!e.profile)return r.a.createElement(he,null);var i=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",null," ",t,":",a)},l=function(e){return r.a.createElement("div",null,r.a.createElement("p",null," About user: ",e.profile.aboutMe," "),r.a.createElement("p",null," Looking for a job: ",!0===e.profile.lookingForAJob?r.a.createElement("span",null,"yes"):r.a.createElement("span",null,"no")," "),r.a.createElement("div",null,"Description:",null===e.profile.lookingForAJobDescription?r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur corporis dolorum est eum ex inventore, ipsa laudantium minus nemo tempora."):e.profile.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("p",null,"Contacts:"),Object.entries(e.profile.contacts).map((function(e){var t=Object(se.a)(e,2),a=t[0],n=t[1];return r.a.createElement(i,{contactTitle:a,contactValue:n})}))))};return r.a.createElement("div",null,r.a.createElement("div",{className:Se.a.conteiner},r.a.createElement("div",{className:Se.a.background},null==e.profile.photos.small?r.a.createElement("img",{src:"https://i.pinimg.com/originals/a9/d0/96/a9d096ac9430a4f297ed99d42861ae9d.jpg",className:Se.a.avatar}):r.a.createElement("img",{src:e.profile.photos.small,className:Se.a.avatar}),r.a.createElement("div",null,"  ",e.authorizedUserID&&r.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})),r.a.createElement("div",{className:Se.a.userName},e.profile.fullName)),r.a.createElement("div",null,r.a.createElement(we,{updateStatus:e.updateStatus,status:e.status})),o?r.a.createElement(De,{profile:e.profile,onSubmit:function(t){e.updateProfile(t),s(!1)}}):r.a.createElement("div",null,r.a.createElement(l,{profile:e.profile}),r.a.createElement("button",{onClick:function(){return s(!0)}},"edit")),r.a.createElement("hr",{className:Se.a.line})))},Me=a(25),Ae={profile:null,status:null,postData:[{massege:"Hello, sabaki! Ya naruto uzumaki",kartinka:"https://klike.net/uploads/posts/2019-03/1551511784_4.jpg",likes:201,id:1,liked:!1},{massege:"I wanna end me",kartinka:"https://store.playstation.com/store/api/chihiro/00_09_000/container/RU/ru/999/EP1464-CUSA07669_00-AV00000000000005/1586331489000/image?w=240&h=240&bg_color=000000&opacity=100&_version=00_09_000",likes:15,id:2,liked:!1},{massege:"Whats wrong with you?",kartinka:"https://i.pinimg.com/originals/a9/d0/96/a9d096ac9430a4f297ed99d42861ae9d.jpg",likes:64,id:3,liked:!1}],buttonDef:"like"},Te=function(e){return function(t){q(e).then((function(e){t({type:"SET_USER_PROFILE",profile:e.data})}))}},Le=function(e){return{type:"SET_PROFILE_STATUS",status:e}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var a={massege:t.newPostText,kartinka:"https://avatarko.ru/img/kartinka/33/multfilm_lyagushka_32117.jpg",likes:12};return Object(_.a)({},e,{postData:[].concat(Object(v.a)(e.postData),[a])});case"ADD_LIKE":return Object(_.a)({},e,{postData:e.postData.map((function(e){return e.id===t.postId&&!1===e.liked?e=Object(_.a)({},e,{likes:e.likes+1,liked:!0}):e.id===t.postId&&!0===e.liked&&(e=Object(_.a)({},e,{likes:e.likes-1,liked:!1})),e}))});case"SET_USER_PROFILE":return Object(_.a)({},e,{profile:t.profile});case"SET_PROFILE_STATUS":return Object(_.a)({},e,{status:t.status});case"SAVE_PHOTO":return Object(_.a)({},e,{profile:Object(_.a)({},e.profile,{photos:t.photos})});default:return e}},ze=a(39),Re=a.n(ze),Be=a(57),He=a.n(Be),We=function(e){return e.postData.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:He.a.item},r.a.createElement("div",{className:He.a.container},r.a.createElement("div",{className:He.a.avatar},r.a.createElement("img",{src:t.kartinka})),r.a.createElement("div",null,t.massege)),r.a.createElement("span",null,t.likes," likes ",r.a.createElement("button",{className:He.a.shareButton,onClick:function(){e.addLike(t.id)}},t.liked?r.a.createElement("i",{className:"fas fa-heart"}," "):r.a.createElement("i",{class:"far fa-heart"}," ")))))}))},Ge=x("textarea"),Je=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}}(30),Ve=r.a.memo((function(e){return console.log("render"),r.a.createElement("div",{className:Re.a.MainConteiner},r.a.createElement("div",{className:Re.a.newPost},r.a.createElement("div",{className:Re.a.myPost},"My posts"),r.a.createElement(qe,{onSubmit:function(t){e.addPost(t.newPostText)}})),r.a.createElement("div",{className:Re.a.posts},r.a.createElement(We,{postData:e.postData,addLike:e.addLike,buttonDef:e.buttonDef})))})),qe=Object(w.a)({form:"addPost"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(j.a,{validate:[Je],name:"newPostText",component:Ge,className:Re.a.textarea}),r.a.createElement("button",{type:"submit",className:Re.a.shareButton},"Submit "))})),Ye=Ve,Ke=Object(F.b)((function(e){return{postData:e.ProfilePage.postData,newPostText:e.ProfilePage.newPostText,buttonDef:e.ProfilePage.buttonDef}}),{addPost:function(e){return{type:"ADD_POST",newPostText:e}},addLike:function(e){return{type:"ADD_LIKE",postId:e}}})(Ye),Xe=function(e){return r.a.createElement("div",{className:Ne.a.content},r.a.createElement("div",null,r.a.createElement(xe,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,authorizedUserID:!!e.authorizedUserID,savePhoto:e.savePhoto,updateProfile:e.updateProfile}),r.a.createElement(Ke,null)))},Ze=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserID),this.props.getUserProfile(e),this.props.getProfileStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement(Xe,{savePhoto:this.props.savePhoto,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,authorizedUserID:this.props.authorizedUserID,updateProfile:this.props.updateProfile})}}]),a}(r.a.Component),Qe=Object(B.d)(Object(F.b)((function(e){return{profile:e.ProfilePage.profile,status:e.ProfilePage.status,authorizedUserID:e.auth.id}}),{getUserProfile:Te,getProfileStatus:function(e){return function(t){Z(e).then((function(e){t(Le(e.data))}))}},updateStatus:function(e){return function(t){Q(e).then((function(a){0===a.data.resultCode&&t(Le(e))}))}},savePhoto:function(e){return function(t){$(e).then((function(e){0===e.data.resultCode&&t({type:"SAVE_PHOTO",photos:e.data.data.photos})}))}},updateProfile:function(e){return function(t,a){var n=a().auth.id;ee(e).then((function(e){if(0===e.data.resultCode)t(Te(n));else{var a=e.data.messages.length>0?e.data.messages[0]:"Something wrong";t(Object(Me.a)("profileData",{_error:a}))}}))}}}),h.f,R)(Ze),$e=a(40),et=a.n($e);var tt=function(e){return r.a.createElement("header",{className:et.a.Header},r.a.createElement("div",{className:et.a.headerContainer},r.a.createElement("div",{className:et.a.logoConteiner},r.a.createElement("div",null,r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Inkscape.logo.svg/390px-Inkscape.logo.svg.png"})),r.a.createElement("div",{className:et.a.nameLogo},"Keetouch")),r.a.createElement("div",{className:et.a.authBlock},e.isAuth?r.a.createElement("div",{className:et.a.nameWithExit},r.a.createElement("div",null,r.a.createElement(f.b,{to:"/profile/".concat(e.id)}," ",e.login)),r.a.createElement("a",{onClick:e.logout},"Exit")):r.a.createElement(f.b,{to:"/login"},"Login"))))},at={data:{id:null,email:null,login:null,isAuth:!1,photo:null,captchaUrl:null}},nt=function(e,t,a,n){return{type:"SET_USER_DATA",data:{id:e,email:t,login:a,isAuth:n}}},rt=function(){return function(e){return Y().then((function(t){if(0===t.data.resultCode){var a=t.data.data,n=a.id,r=a.email,o=a.login;e(nt(n,r,o,!0))}}))}},ot=function(){return function(e){te().then((function(t){var a=t.data.url;e(function(e){return{type:"GET_CAPTCHA_URL",captchaUrl:e}}(a))}))}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(_.a)({},e,{},t.data);case"GET_CAPTCHA_URL":return Object(_.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},it=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(tt,this.props)}}]),a}(r.a.Component),lt=Object(F.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,profile:e.ProfilePage.profile,id:e.auth.id}}),{logout:function(){return function(e){X().then((function(t){0===t.data.resultCode&&e(nt(null,null,null,!1))}))}},getUserProfile:Te})(it),ct=a(93),ut=a.n(ct),mt=x("input"),pt=function(e){return e?void 0:"Required"},dt=Object(w.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(j.a,{type:"login",name:"email",placeholder:"your login",component:mt,validate:pt}),r.a.createElement(j.a,{type:"password",name:"password",placeholder:"your password",component:mt,validate:pt}),r.a.createElement(j.a,{type:"checkbox",name:"rememberMe",component:"input"})," remember me",e.error?r.a.createElement("div",{className:D.a.spanError},e.error):void 0,e.captchaUrl&&r.a.createElement("div",null,r.a.createElement("img",{src:e.captchaUrl}),r.a.createElement("div",null,r.a.createElement(j.a,{type:"text",name:"captcha",placeholder:"enter symbols what you see",component:"input"}))," "),r.a.createElement("button",{type:"submit"},"Submit"))})),ft=Object(F.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,a,n){return function(r){K(e,t,a,n).then((function(e){if(0===e.data.resultCode)r(rt());else{10===e.data.resultCode&&r(ot());var t=e.data.messages.length>0?e.data.messages[0]:"Some error";r(Object(Me.a)("login",{_error:t}))}}))}}})((function(e){return e.isAuth?r.a.createElement(h.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("div",{className:ut.a.textContainer},r.a.createElement("div",null,r.a.createElement("p",{className:ut.a.loginText}," LOGIN")),r.a.createElement(dt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl})))})),gt={initialized:!1},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_DONE":return Object(_.a)({},e,{initialized:!0});default:return e}},Et=a(136),vt=a(126),_t=Object(B.c)({ProfilePage:Fe,MassagePage:P,UsersPage:oe,auth:st,form:vt.a,appCommon:ht}),bt=Object(B.e)(_t,Object(B.a)(Et.a));window.store=bt;var Pt=bt,kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(lt,null),r.a.createElement(g,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(h.b,{path:"/messages",render:function(){return r.a.createElement(H,null)}}),r.a.createElement(h.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(Qe,null)}}),r.a.createElement(h.b,{path:"/users",render:function(){return r.a.createElement(ke,null)}}),r.a.createElement(h.b,{path:"/music",component:E}),r.a.createElement(h.b,{path:"/login",render:function(){return r.a.createElement(ft,null)}}))):r.a.createElement(he,null)}}]),a}(r.a.Component),Ot=Object(B.d)(h.f,Object(F.b)((function(e){return{initialized:e.appCommon.initialized}}),{initializeApp:function(){return function(e){var t=e(rt());Promise.all([t]).then((function(){e({type:"INITIALIZE_DONE"})}))}}}))(kt),Nt=function(e){return r.a.createElement(f.a,null,r.a.createElement("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.6.1/css/all.css",integrity:"sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP",crossOrigin:"anonymous"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Notable&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&display=swap",rel:"stylesheet"}),r.a.createElement(F.a,{store:Pt},r.a.createElement(Ot,null))," ")};s.a.render(r.a.createElement(Nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){e.exports={error:"FormsControls_error__3OLHi",spanError:"FormsControls_spanError__2uqSD"}},36:function(e,t,a){e.exports={mainMasseges:"Masseges_mainMasseges__3VfwA",dialogsItem:"Masseges_dialogsItem__1L4Np",inputMassage:"Masseges_inputMassage__28cAN",textarea:"Masseges_textarea__2IV2a",dialogs:"Masseges_dialogs__2DsuF",shareButton:"Masseges_shareButton__1shA2"}},37:function(e,t,a){e.exports={dialogs:"DialogItem_dialogs__3RgDU",photo:"DialogItem_photo__3L__9",kartinka:"DialogItem_kartinka__t7B1J",nameDialog:"DialogItem_nameDialog__2bcJs",active:"DialogItem_active__1MKGb"}},38:function(e,t,a){e.exports={conteiner:"ProfileInfo_conteiner__192ae",background:"ProfileInfo_background__2Ljkr",avatar:"ProfileInfo_avatar__1aQAo",userName:"ProfileInfo_userName__JaCqo"}},39:function(e,t,a){e.exports={content:"MyPosts_content__3R2JR",MainConteiner:"MyPosts_MainConteiner__2Ff28",newPost:"MyPosts_newPost__2-V_h",textarea:"MyPosts_textarea__2F7Kh",myPost:"MyPosts_myPost__1SIYf",shareButton:"MyPosts_shareButton__1nIYN"}},40:function(e,t,a){e.exports={Header:"Header_Header__3SLqU",logoConteiner:"Header_logoConteiner__Coi6W",nameLogo:"Header_nameLogo__3bqkw",headerContainer:"Header_headerContainer__92M72",authBlock:"Header_authBlock__2ZYIy",nameWithExit:"Header_nameWithExit__1bBDy"}},47:function(e,t,a){e.exports={userImg:"Users_userImg__2IyxD",Container:"Users_Container__19s6x",selectedPage:"Users_selectedPage__qZdid",buttonsBlock:"Users_buttonsBlock__CHNOg",paginator:"Users_paginator__2HTj7"}},57:function(e,t,a){e.exports={item:"Post_item__2bga8",container:"Post_container__2zCIH",avatar:"Post_avatar__DfcCF",shareButton:"Post_shareButton__2RWA0"}},91:function(e,t,a){e.exports={preloader:"Preloader_preloader__C0Mxc"}},92:function(e,t,a){e.exports={mainContainer:"ProlifeStatus_mainContainer__QyxD3",statusText:"ProlifeStatus_statusText__2YVzs"}},93:function(e,t,a){e.exports={loginText:"LoginPage_loginText__2XsLH",textContainer:"LoginPage_textContainer__3v8pS"}}},[[163,1,2]]]);
//# sourceMappingURL=main.ec2c3e0c.chunk.js.map